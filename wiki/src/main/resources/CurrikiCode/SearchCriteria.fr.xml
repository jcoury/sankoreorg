<?xml version="1.0" encoding="UTF-8"?>
<xwikidoc>
<web>CurrikiCode</web>
<name>SearchCriteria</name>
<language>fr</language>
<defaultLanguage>en</defaultLanguage>
<translation>1</translation>
<parent></parent>
<creator>XWiki.Admin</creator>
<author>XWiki.Admin</author>
<customClass></customClass>
<contentAuthor>XWiki.Admin</contentAuthor>
<creationDate>1318606307000</creationDate>
<date>1318606307000</date>
<contentUpdateDate>1318606307000</contentUpdateDate>
<version>1.1</version>
<title></title>
<template></template>
<defaultTemplate></defaultTemplate>
<validationScript></validationScript>
<comment></comment>
<minorEdit>false</minorEdit>
<syntaxId>xwiki/2.0</syntaxId>
<hidden>false</hidden>
<content>{{velocity}}
#set($discard = $xwiki.ssx.use('CurrikiCode.SearchCriteria'))
#set($discard = $xwiki.jsx.use('CurrikiCode.SearchCriteria', {'minify' : false}))
{{html clean="false"}}
&lt;form action="#" method="get" id="search-criteria-form"&gt;
  &lt;table id="search-criteria"&gt;
    &lt;tr&gt;
      &lt;th colspan="2"&gt;
        $msg.get('SearchCriteria.teacher_resources_by_grade_subject')
      &lt;/th&gt;
      &lt;th style="width:2%;border:0;"&gt;
      &lt;/th&gt;
      &lt;th colspan="2"&gt;
        $msg.get('SearchCriteria.teacher_resources_by_type')
      &lt;/th&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;
        &lt;span class="criterion-title"&gt;$msg.get('SearchCriteria.grade_range_age_range'):&lt;/span&gt;
        #set($query = ", BaseObject obj where obj.name=doc.fullName and doc.space='AssetMetadata' and doc.parent='' and obj.className='CurrikiCode.EducationalLevelClass' order by doc.fullName")
        #set($keys = $xwiki.searchDocuments($query))
        #set($keysMap = $util.hashMap)
        #set($valuesMap = $util.hashMap)
        #foreach($key in $keys)
          #set($value = $msg.get("CurrikiCode.AssetClass_educational_level_${key}"))
          #set($discard = $valuesMap.put($value, $key))
          #set($discard = $keysMap.put($key, $value))
        #end
        #set($keys = $sorttool.sort($valuesMap))
        &lt;ul
           #foreach($key in $keys)
          &lt;li&gt;            
            &lt;input type="radio" name="criteria_grade_age_range" value="$key"/&gt;
            $keysMap.get($key)
          &lt;/li&gt;
          #end
          &lt;li&gt;&lt;input type="radio" name="criteria_grade_age_range" value="" checked="checked"/&gt;
           $msg.get('UNSPECIFIED')&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/td&gt;
      &lt;td&gt;
        &lt;span class="criterion-title"&gt;$msg.get('SearchCriteria.subject'):&lt;/span&gt;
        #set($query = ", BaseObject obj where obj.name=doc.fullName and doc.space='FW_masterFramework' and doc.parent='' and obj.className='XWiki.FrameworkItemClass' order by doc.fullName")
        #set($keys = $xwiki.searchDocuments($query))
        #set($keysMap = $util.hashMap)
        #set($valuesMap = $util.hashMap)
        #foreach($key in $keys)
          #set($value = $msg.get("CurrikiCode.AssetClass_fw_items_${key}"))
          #set($discard = $valuesMap.put($value, $key))
          #set($discard = $keysMap.put($key, $value))
        #end
        #set($keys = $sorttool.sort($valuesMap))
        &lt;ul&gt;          
          #foreach($key in $keys)
          &lt;li&gt;
            &lt;input type="radio" name="criteria_subject" value="$key"/&gt;
            $keysMap.get($key)
          &lt;/li&gt;
          #end
          &lt;li&gt;&lt;input type="radio" name="criteria_subject" value="" checked="checked"/&gt;
          $msg.get('UNSPECIFIED')&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/td&gt;
      &lt;td&gt;&lt;/td&gt;
      &lt;td&gt;
        &lt;span class="criterion-title"&gt;$msg.get('SearchCriteria.type_of_resource'):&lt;/span&gt;
        #set($assetClass = $xwiki.getClass('CurrikiCode.AssetClass'))
        #set($keys = $assetClass.get('category').getListValues())
        #set($keysMap = $util.hashMap)
        #set($valuesMap = $util.hashMap)
        #foreach($key in $keys)
          #set($value = $msg.get("CurrikiCode.AssetClass_category_${key}"))
          #set($discard = $valuesMap.put($value, $key))
          #set($discard = $keysMap.put($key, $value))
        #end
        #set($keys = $sorttool.sort($valuesMap))
        &lt;ul&gt;          
          #foreach($key in $keys)
          &lt;li&gt;
            &lt;input type="radio" name="criteria_subject" value="$key"/&gt;
            $keysMap.get($key)
          &lt;/li&gt;
          #end
          &lt;li&gt;&lt;input type="radio" name="criteria_resource_type" value="" checked="checked"/&gt;
          $msg.get('UNSPECIFIED')&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/td&gt;
      &lt;td&gt;
        &lt;span class="criterion-title"&gt;$msg.get('SearchCriteria.type_of_usage'):&lt;/span&gt;
        #set($query = ", BaseObject obj where obj.name=doc.fullName and doc.space='AssetMetadata' and doc.parent='' and obj.className='CurrikiCode.InstructionalComponentClass' order by doc.fullName")
        #set($keys = $xwiki.searchDocuments($query))
        #set($keysMap = $util.hashMap)
        #set($valuesMap = $util.hashMap)
        #foreach($key in $keys)
          #set($value = $msg.get("CurrikiCode.AssetClass_instructional_component_${key}"))
          #set($discard = $valuesMap.put($value, $key))
          #set($discard = $keysMap.put($key, $value))
        #end
        #set($keys = $sorttool.sort($valuesMap))
        &lt;ul&gt;          
          #foreach($key in $keys)
          &lt;li&gt;
            &lt;input type="radio" name="criteria_subject" value="$key"/&gt;
            $keysMap.get($key)
          &lt;/li&gt;
          #end
          &lt;li&gt;&lt;input type="radio" name="criteria_usage_type" value="" checked="checked"/&gt;
          $msg.get('UNSPECIFIED')&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td colspan="5"&gt;
        &lt;a href="${xwiki.getURL('Search.WebHome')}#o%3As%3Ds%253Aresource%5Ef%3Do%253Aresource%253Do%25253Asubjectparent%25253Ds%2525253A%25255Esubject%25253Ds%2525253A%25255Ecategory%25253Ds%2525253A%25255Elevelparent%25253Ds%2525253A%25255Elevel%25253Ds%2525253A%25255Elanguage%25253Ds%2525253A%25255Ereview%25253Ds%2525253A%25255Eictparent%25253Ds%2525253A%25255Eict%25253Ds%2525253A%25255Especial%25253Ds%2525253A%255Egroup%253Do%25253Asubjectparent%25253Ds%2525253A%25255Esubject%25253Ds%2525253A%25255Elevelparent%25253Ds%2525253A%25255Elevel%25253Ds%2525253A%25255Epolicy%25253Ds%2525253A%25255Elanguage%25253Ds%2525253A%255Emember%253Do%25253Asubjectparent%25253Ds%2525253A%25255Esubject%25253Ds%2525253A%25255Emember_type%25253Ds%2525253A%25255Ecountry%25253Ds%2525253A%255Eblog%253Do%25253A%255Ecurriki%253Do%25253A%5Ep%3Do%253Aresource%253Do%25253Ac%25253Dn%2525253A0%25255Es%25253Dn%2525253A25%255Egroup%253Do%25253Ac%25253Dn%2525253A0%25255Es%25253Dn%2525253A25%255Emember%253Do%25253Ac%25253Dn%2525253A0%25255Es%25253Dn%2525253A25%255Eblog%253Do%25253Ac%25253Dn%2525253A0%25255Es%25253Dn%2525253A25%255Ecurriki%253Do%25253Ac%25253Dn%2525253A0%25255Es%25253Dn%2525253A25%5Et%3Ds%253Asearch-resource-tab%5Ea%3Do%253Aresource%253Do%25253Aa%25253Db%2525253A1" id="submit-link"&gt;$msg.get('search.text.entry.findbutton')&lt;/a&gt;
      &lt;/td&gt;
    &lt;/tr&gt;
  &lt;/table&gt;
&lt;/form&gt;
{{/html}}
{{/velocity}}</content></xwikidoc>